@(todolist: Todolist, tasks: List[Task], websocketUri: String)
@import helper._
@import play.libs.Json
@main(todolist.getProject().getName() + " - " + todolist.getName()) {
<script type="text/javascript">
	var tasksCount = @tasks.size();
	var tasks = [];
	@for(task <- tasks) {
		tasks[@task.getPosition()] = {id:"@task.getId()",state:"@task.getState()",position:@task.getPosition(),author:"@task.getAuthor().getUsername()",creationDate:"@task.getCreationDate().format(Application.COMPLETE_DATE_PATTERN)",title: @Html(Json.stringify(Json.toJson(task.getTitle()))),content: @Html(Json.stringify(Json.toJson(task.getContent())))};
	}
	websocketUri = "@websocketUri";
</script>
@todolists.modalNewTask.render(todolist)
<div id="main-div"
				   data-route-add-task="@routes.Tasks.add(todolist.getProject().getCreator().getUsername(), todolist.getProject().getCleanName(), todolist.getCleanName())"
				   data-route-add-tag="@routes.Tasks.addTag(todolist.getProject().getCreator().getUsername(), todolist.getProject().getCleanName(), todolist.getCleanName())"
				   data-route-remove-tag="@routes.Tasks.removeTag(todolist.getProject().getCreator().getUsername(), todolist.getProject().getCleanName(), todolist.getCleanName())">
	<section>
		<header>
		<a href='@routes.Projects.show(todolist.getProject().getCreator().getUsername(), todolist.getProject().getCleanName())' title='Back to @todolist.getProject().getName()'>&nbsp;<i class='icon-arrow-left'> </i> <span class="bold">@todolist.getProject().getName()</span></a>
			<h1 class="green"><span class="light-gray"><i class="icon-ok"> </i></span> @todolist.getName()</h1>
			<span class="topic-author light-gray">
				<i class="icon-user"></i> Authored by</span> <span class="gray">@todolist.getCreator().getUsername()
			</span> 
    		<span class="topic-creation-date light-gray">
    			<i class="icon-time"></i>&nbsp;Creation date <span class="gray">@todolist.getCreationDate().format(Application.COMPLETE_DATE_PATTERN)</span>
        	</span>
		</header>
		<article>
			<div class="text-center">
				<button id="btn-create-task"> <i class="icon-plus"></i>&nbsp; Create a task</button>
			</div>
		</article>
		<article>
			<div class="todo">
				<h3><i class="light-gray icon-check-empty"> </i>Todo</h3>
				<div id="todo-container" class="pretty-list">
					<div class="todo-template" style="display: none;">
						<div class="pretty-entry todo-entry" id="{{id}}">
                            <a href='#' class="task-remove"><i class="float-right light-gray icon-trash"></i></a>
							<div>
                                <a href='#' class="task-done" title="Done"><i class="icon-check-empty gray"></i></a> <span class="dark-gray bold">{{title}}</span> - {{content}}
                            </div>
                            <div class="float-left">
                                <div class="tags">
                                    <span>
                                        <i class="gray icon-tag" title="Tags"></i>&nbsp;
                                    </span>
                                    <a class="tag" href="#" data-tag="TODO"><span class="tag">TODO</span></a>
                                    <a class="tag" href="#" data-tag="FEATURE"><span class="tag">FEATURE</span></a>
                                    <a class="tag" href="#" data-tag="WISH"><span class="tag">WISH</span></a>
                                </div>
                                <div class="todo-infos">
                                    <span>
                                        <span class="task-author gray"><i class="icon-user"></i>&nbsp;{{author}}</span> <span class="light-gray"><i class="icon-time"></i>&nbsp;{{creationDate}}</span>
                                    </span>
                                </div>
                            </div>
                            <div class="float-right">
                                <div class="todo-actions">
                                    <button class="small-btn task-comments"><i class="icon-comments"></i> Comments</button>
                                </div>
                            </div>
                            <div class="clear">
                            </div>
						</div>
					</div>
				</div>
			</div>
			<div class="done">
				<h3><i class="light-gray icon-check"> </i>Done</h3>
			</div>
		</article>
		<footer>
		</footer>
	</section>
</div>
@helper.requireJs(core = routes.Assets.at("javascripts/require.js").url, module = routes.Assets.at("javascripts/todolists").url)
}
